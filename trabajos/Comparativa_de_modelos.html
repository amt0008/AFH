<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparativa de modelos IA Alejandro Marin</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* ESTO HACE QUE EL SCROLL SEA SUAVE AL PULSAR EL ENLACE */
        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: #f4f4f9;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: 'Segoe UI', sans-serif;
            gap: 10px; 
        }

        /* Contenedor principal de gr√°ficas y tablas */
        .chart-wrapper {
            position: relative;
            width: 90%;
            max-width: 1200px;
            background: white;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08); 
            border-radius: 20px;
            height: 400px;
            min-height: 400px;
            box-sizing: border-box; 
        }

        /* Clase auxiliar para contenedores que deben adaptarse al contenido (tablas) */
        .auto-height {
            height: auto !important;
            min-height: auto !important;
        }

        canvas {
            width: 100% !important;
            height: 100% !important;
        }

        /* Grid para las gr√°ficas comparativas (abajo) */
        .accuracy-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            width: 90%;
            max-width: 1200px;
            margin-bottom: 0px; 
        }

        /* Contenedor individual de las gr√°ficas de abajo */
        .chart-container {
            background: white;
            padding: 15px; 
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            position: relative;
            height: 350px;
            min-height: 350px;
        }

        .chart-title {
            text-align: center;
            font-size: 1.3em;
            color: #333;
            margin-bottom: 2px; 
            font-weight: 600;
            height: 30px; 
        }
        
        .chart-subtitle-detail {
            text-align: center;
            font-size: 0.75em;
            color: #666;
            margin-bottom: 5px; 
            height: 15px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .chart-container canvas {
            height: calc(100% - 40px) !important; 
        }

        @media (max-width: 1200px) {
            .accuracy-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* --- ESTILOS DE T√çTULOS DE SECCI√ìN --- */
        h2.section-title {
            color: #1a1a1a;
            margin-top: 15px;    
            margin-bottom: 0px;  
            text-align: center;
            font-size: 1.8rem;
        }

        p.section-subtitle {
            text-align: center;
            color: #666;
            margin-top: 5px;    
            margin-bottom: 15px; 
            font-size: 0.95rem;
        }

        /* --- ESTILOS GENERALES DE TABLAS --- */
        .styled-table {
            width: 100%;
            border-collapse: collapse;
            font-family: 'Segoe UI', sans-serif;
            margin-bottom: 10px;
        }

        .styled-table thead tr {
            background-color: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .styled-table th {
            padding: 12px 15px;
            text-align: left;
            color: #495057;
            font-weight: 600;
        }

        .styled-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
            color: #2c3e50;
        }

        .styled-table tr:last-child td {
            border-bottom: none;
        }

        /* Estilo espec√≠fico para datos num√©ricos/t√©cnicos */
        .mono-data {
            font-family: 'Consolas', monospace;
            font-weight: bold;
            color: #555;
            background-color: #f8f9fa;
            padding: 4px 8px;
            border-radius: 4px;
            border: 1px solid #e9ecef;
        }

        /* Layout para las dos tablas lado a lado */
        .tables-row {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }

        .table-column {
            flex: 1;
            min-width: 300px;
        }

        /* Caja de comentarios estilo estudiante */
        .insight-box {
            margin-top: 10px;
            padding: 15px;
            background-color: #f8f9fa;
            /* SE HA ELIMINADO EL BORDE AZUL AQU√ç */
            border-radius: 4px;
            font-size: 0.95rem; 
            color: #444;
            line-height: 1.5;
            font-style: italic; 
        }

        .insight-highlight {
            font-weight: bold;
            color: #1a1a1a;
            font-style: normal;
        }

    </style>
</head>
<body>

    <p style="color: gray; width: 90%; max-width: 1200px; text-align: center; margin-bottom: 10px; font-size: 0.9rem;">
        Nota: La <a href="#zona-documentacion" style="color: #3b82f6; text-decoration: underline; cursor: pointer;">documentaci√≥n del proyecto</a> se encuentra situada al final de la p√°gina.
    </p>

    <div class="chart-wrapper">
        <canvas id="graficaCuant"></canvas>
    </div>

    <div class="chart-wrapper">
        <canvas id="graficaCual"></canvas>
    </div>

    <script>
        // --- DATOS GLOBALES ---
        const rawData = {
            labels: ['GPT-OSS 20B', 'Granite 4.0 Tiny', 'Qwen 3 VL 4B', 'Qwen 3 Thinking'],
            ptk: [557, 283, 904, 607],
            segundos: [15.8, 5.3, 23.1, 9.0],
            calidad: [9, 7, 6, 5]
        };
        const latenciaData = [4.09, 0.54, 0.61, 0.29]; 

        // CONFIGURACI√ìN GR√ÅFICA 1: CUANTITATIVA
        const MAX_TOKENS = 1200;
        const MAX_SEGUNDOS = 30;
        const styleTiempo = { color: 'rgba(54, 162, 235, 1)', label: 'Duraci√≥n (s)' };
        const styleTokens = { color: 'rgba(255, 99, 132, 1)', label: 'Tokens' };
        const estadoVisCuant = { tiempo: true, tokens: true };

        function calcularCapasCuant() {
            const layers = { back: { data: [], bg: [], border: [], meta: [] }, front: { data: [], bg: [], border: [], meta: [] } };
            for (let i = 0; i < rawData.labels.length; i++) {
                const rawTime = estadoVisCuant.tiempo ? rawData.segundos[i] : 0;
                const rawTok = estadoVisCuant.tokens ? rawData.ptk[i] : 0;
                const normTime = (rawTime / MAX_SEGUNDOS) * 100;
                const normTok = (rawTok / MAX_TOKENS) * 100;
                const items = [
                    { norm: normTime, raw: rawTime, style: styleTiempo, type: 'tiempo' },
                    { norm: normTok, raw: rawTok, style: styleTokens, type: 'tokens' }
                ];
                items.sort((a, b) => b.norm - a.norm);
                layers.back.data.push(items[0].norm); layers.back.bg.push(items[0].style.color); layers.back.border.push(items[0].style.color); layers.back.meta.push(items[0]);
                layers.front.data.push(items[1].norm); layers.front.bg.push(items[1].style.color); layers.front.border.push(items[1].style.color); layers.front.meta.push(items[1]);
            }
            return layers;
        }

        let datosCuant = calcularCapasCuant();
        const ctxCuant = document.getElementById('graficaCuant').getContext('2d');

        const graficaCuant = new Chart(ctxCuant, {
            type: 'bar',
            data: {
                labels: rawData.labels,
                datasets: [
                    { data: datosCuant.back.data, backgroundColor: datosCuant.back.bg, borderColor: datosCuant.back.border, borderWidth: 1, borderRadius: 6, grouped: false, order: 2, barPercentage: 0.6, categoryPercentage: 0.8, yAxisID: 'y_base' },
                    { data: datosCuant.front.data, backgroundColor: datosCuant.front.bg, borderColor: datosCuant.front.border, borderWidth: 1, borderRadius: 6, grouped: false, order: 1, barPercentage: 0.6, categoryPercentage: 0.8, yAxisID: 'y_base' }
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false, animation: { duration: 1000 },
                interaction: { mode: 'index', intersect: false },
                plugins: {
                    title: { display: true, text: 'An√°lisis Cuantitativo: Rendimiento y Consumo', font: { size: 18, weight: 'bold' }, padding: { bottom: 10 }, color: '#333' },
                    legend: {
                        position: 'bottom', labels: { padding: 20, font: { size: 14 }, usePointStyle: false, boxWidth: 40,
                            generateLabels: (chart) => [
                                { text: styleTokens.label, fillStyle: styleTokens.color, strokeStyle: styleTokens.color, hidden: !estadoVisCuant.tokens },
                                { text: styleTiempo.label, fillStyle: styleTiempo.color, strokeStyle: styleTiempo.color, hidden: !estadoVisCuant.tiempo }
                            ]
                        },
                        onClick: (e, legendItem) => {
                            if (legendItem.text === styleTokens.label) estadoVisCuant.tokens = !estadoVisCuant.tokens;
                            if (legendItem.text === styleTiempo.label) estadoVisCuant.tiempo = !estadoVisCuant.tiempo;
                            datosCuant = calcularCapasCuant();
                            graficaCuant.data.datasets[0].data = datosCuant.back.data; graficaCuant.data.datasets[0].backgroundColor = datosCuant.back.bg; graficaCuant.data.datasets[0].meta = datosCuant.back.meta;
                            graficaCuant.data.datasets[1].data = datosCuant.front.data; graficaCuant.data.datasets[1].backgroundColor = datosCuant.front.bg; graficaCuant.data.datasets[1].meta = datosCuant.front.meta;
                            graficaCuant.update();
                        }
                    },
                    tooltip: {
                        enabled: true, backgroundColor: 'rgba(30, 30, 30, 0.9)', padding: 10,
                        callbacks: {
                            label: (context) => {
                                const layer = context.datasetIndex === 0 ? datosCuant.back : datosCuant.front;
                                const meta = layer.meta[context.dataIndex];
                                if (!meta || meta.raw === 0) return null;
                                return meta.type === 'tiempo' ? `‚è± ${meta.raw}s` : `üì¶ ${meta.raw} tokens`;
                            }
                        }
                    }
                },
                scales: {
                    x: { grid: { display: false }, stacked: true },
                    y_base: { display: false, min: 0, max: 100 },
                    y_left: { position: 'left', min: 0, max: 100, grid: { color: 'rgba(0,0,0,0.05)' }, title: { display: true, text: 'Tokens', color: styleTokens.color, font: {weight:'bold'} }, ticks: { color: styleTokens.color, callback: v => Math.round((v/100)*MAX_TOKENS) } },
                    y_right: { position: 'right', min: 0, max: 100, grid: { drawOnChartArea: false }, title: { display: true, text: 'Duraci√≥n (s)', color: styleTiempo.color, font: {weight:'bold'} }, ticks: { color: styleTiempo.color, callback: v => Math.round((v/100)*MAX_SEGUNDOS) + ' s' } }
                }
            }
        });

        // CONFIGURACI√ìN GR√ÅFICA 2: CUALITATIVA
        const styleCalidad = { color: 'rgba(46, 204, 113, 1)', label: 'Calidad (1-10)' };
        const ctxCual = document.getElementById('graficaCual').getContext('2d');

        const graficaCual = new Chart(ctxCual, {
            type: 'bar',
            data: {
                labels: rawData.labels,
                datasets: [{
                    label: styleCalidad.label,
                    data: rawData.calidad,
                    backgroundColor: rawData.calidad.map(val => val >= 9 ? '#2ecc71' : val >= 7 ? '#f1c40f' : '#e74c3c'),
                    borderColor: rawData.calidad.map(val => val >= 9 ? '#27ae60' : val >= 7 ? '#d4ac0d' : '#c0392b'),
                    borderWidth: 1,
                    borderRadius: 6,
                    barPercentage: 0.6,
                    categoryPercentage: 0.8
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false, animation: { duration: 1000 },
                plugins: {
                    title: { display: true, text: 'An√°lisis Cualitativo: Precisi√≥n de Respuesta', font: { size: 18, weight: 'bold' }, padding: { bottom: 10 }, color: '#333' },
                    legend: { display: false },
                    tooltip: { backgroundColor: 'rgba(30, 30, 30, 0.9)', padding: 10, callbacks: { label: (context) => `‚òÖ Calidad: ${context.raw} / 10` } }
                },
                scales: {
                    x: { grid: { display: false } },
                    y: { beginAtZero: true, max: 10, title: { display: true, text: 'Puntuaci√≥n (1-10)', color: styleCalidad.color, font: {weight:'bold'} }, ticks: { stepSize: 1, color: styleCalidad.color } }
                }
            }
        });
    </script>

    <div class="chart-wrapper auto-height" style="margin-top: 15px;">
    <h3 style="text-align: center; color: #333; margin-bottom: 20px;">Tabla de Modelos</h3>
    <table class="styled-table">
        <thead>
            <tr>
                <th style="width: 20%;">Modelo</th>
                <th style="width: 15%; text-align: center;">Puntuaci√≥n</th>
                <th style="width: 65%;">Virtudes y Fallos Detectados</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="font-weight: bold; color: #2c3e50;">GPT-OSS 20B</td>
                <td style="text-align: center;"><span style="background-color: #d4edda; color: #155724; padding: 5px 10px; border-radius: 6px; font-weight: bold;">9/10</span></td>
                <td style="line-height: 1.5;">
                    <strong style="color: #27ae60;">‚úì Virtudes:</strong> Cumplidor. Resuelve correctamente la mayor√≠a de preguntas o problemas de l√≥gica secuencial (quien vive en que casa) y mantiene la coherencia.<br>
                    <strong style="color: #c0392b;">‚úó Fallos:</strong> Es fiable pero le falta un poco de creatividad.
                </td>
            </tr>
            <tr>
                <td style="font-weight: bold; color: #2c3e50;">Granite 4.0 Tiny</td>
                <td style="text-align: center;"><span style="background-color: #fff3cd; color: #856404; padding: 5px 10px; border-radius: 6px; font-weight: bold;">7/10</span></td>
                <td style="line-height: 1.5;">
                    <strong style="color: #27ae60;">‚úì Virtudes:</strong> Concisi√≥n extrema. Si solo buscas un dato puntual sin texto alrededor, es r√°pido.<br>
                    <strong style="color: #c0392b;">‚úó Fallos:</strong> Carece de capacidad conversacional. Sus respuestas son listas de palabras o monos√≠labos sin conectar frases, lo que lo hace sentir muy limitado para un chat.
                </td>
            </tr>
            <tr>
                <td style="font-weight: bold; color: #2c3e50;">Qwen 3 VL 4B</td>
                <td style="text-align: center;"><span style="background-color: #f8d7da; color: #721c24; padding: 5px 10px; border-radius: 6px; font-weight: bold;">6/10</span></td>
                <td style="line-height: 1.5;">
                    <strong style="color: #27ae60;">‚úì Virtudes:</strong> No solo acierta, sino que justifica sus respuestas con matices, explicando el contexto (ej: entiende el doble sentido en acertijos de lenguaje).<br>
                    <strong style="color: #c0392b;">‚úó Fallos:</strong> Es poco fiable, requiri√≥ de varios intentos, aproximadamente 3 por cada bater√≠a de preguntas, para entender la pregunta y responderla moderadamente bien.
                </td>
            </tr>
            <tr>
                <td style="font-weight: bold; color: #2c3e50;">Qwen 3 Thinking</td>
                <td style="text-align: center;"><span style="background-color: #f8d7da; color: #721c24; padding: 5px 10px; border-radius: 6px; font-weight: bold;">5/10</span></td>
                <td style="line-height: 1.5;">
                    <strong style="color: #27ae60;">‚úì Virtudes:</strong> Muestra su cadena de pensamiento ("Thinking Process"), lo cual es √∫til para ver c√≥mo intenta deducir.<br>
                    <strong style="color: #c0392b;">‚úó Fallos:</strong> Sufre de "sobre-an√°lisis". Al intentar pensar demasiado respuestas sencillas, acaba alucinando (inventando) respuestas incorrectas y absurdas en acertijos b√°sicos de ni√±os.
                </td>
            </tr>
        </tbody>
    </table>
    </div>

    <h2 class="section-title">Resumen cuantitativo <span style="font-size: 0.6em; vertical-align: middle; background-color: #e9ecef; color: #666; padding: 3px 10px; border-radius: 10px; margin-left: 10px; font-weight: normal;">Bench de 10 preguntas</span></h2>
    <p class="section-subtitle">M√©tricas de tokens generados en un entorno Windows vs un entorno Mac (Inferencia 100% en local)</p>

    <div class="chart-wrapper auto-height">
        <div class="tables-row">
            <div class="table-column">
                <h3 style="text-align: center; color: #333; margin-bottom: 15px;">Longitud de respuestas en Windows</h3>
                <table class="styled-table">
                    <thead>
                        <tr>
                            <th>Modelo (Windows)</th>
                            <th style="text-align: right;">Tokens totales</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>GPT-OSS 20B</td>
                            <td style="text-align: right;"><span class="mono-data">1539 tokens</span></td>
                        </tr>
                        <tr>
                            <td>Qwen 3 VL 4B</td>
                            <td style="text-align: right;"><span class="mono-data">910 tokens</span></td>
                        </tr>
                        <tr>
                            <td>Granite 4.0 Tiny</td>
                            <td style="text-align: right;"><span class="mono-data">79 tokens</span></td>
                        </tr>
                        <tr>
                            <td>Qwen 3 Thinking</td>
                            <td style="text-align: right;"><span class="mono-data">14400 tokens</span></td>
                        </tr>
                    </tbody>
                </table>
                <div class="insight-box">
                     <span class="insight-highlight">Qwen 3 Thinking</span> se extiende much√≠simo m√°s explicando sus razonamientos, mientras que en el lado opuesto est√° <span class="insight-highlight">Granite</span>, que va directo al grano y suelta lo justo y necesario.
                </div>
            </div>

            <div class="table-column">
                <h3 style="text-align: center; color: #333; margin-bottom: 15px;">Longitud de respuestas en Mac</h3>
                <table class="styled-table">
                    <thead>
                        <tr>
                            <th>Modelo (Mac)</th>
                            <th style="text-align: right;">Tokens totales</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>GPT-OSS 20B</td>
                            <td style="text-align: right;"><span class="mono-data">600 tokens</span></td>
                        </tr>
                        <tr>
                            <td>Qwen 3 VL 4B</td>
                            <td style="text-align: right;"><span class="mono-data">4344 tokens</span></td>
                        </tr>
                        <tr>
                            <td>Granite 4.0 Tiny</td>
                            <td style="text-align: right;"><span class="mono-data">904 tokens</span></td>
                        </tr>
                        <tr>
                            <td>Qwen 3 Thinking</td>
                            <td style="text-align: right;"><span class="mono-data">3405 tokens</span></td>
                        </tr>
                    </tbody>
                </table>
                <div class="insight-box">
                    En <span class="insight-highlight">Mac</span>, los dos modelos de la familia Qwen son los que m√°s escriben. Se nota bastante diferencia con GPT-OSS y Granite, que son mucho m√°s "cortos" y concisos respondiendo lo mismo.
                </div>
            </div>
        </div>
    </div>
    <div class="chart-wrapper">
        <canvas id="graficaLatencia"></canvas>
    </div>
    <script>
        const ctxLat = document.getElementById('graficaLatencia').getContext('2d');
        new Chart(ctxLat, {
            type: 'bar',
            data: {
                labels: rawData.labels,
                datasets: [{
                    label: 'Tiempo al Primer Token (s)',
                    data: latenciaData,
                    backgroundColor: 'rgba(255, 159, 64, 0.7)',
                    borderColor: 'rgba(255, 159, 64, 1)',
                    borderWidth: 1, borderRadius: 6, barPercentage: 0.6, categoryPercentage: 0.8
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: {
                    title: { display: true, text: 'Latencia Inicial (to first token o tiempo de reacci√≥n medio)', font: { size: 18, weight: 'bold' }, padding: { bottom: 10 }, color: '#333' },
                    legend: { display: false },
                    tooltip: { backgroundColor: 'rgba(30, 30, 30, 0.9)', padding: 10, callbacks: { label: (context) => `‚è± ${context.raw} segundos` } }
                },
                scales: { x: { grid: { display: false } }, y: { beginAtZero: true, title: { display: true, text: 'Segundos (s)', color: '#666', font: {weight:'bold'} } } }
            }
        });
    </script>

    <div class="chart-wrapper auto-height" style="margin-top: 15px;">
        <h3 style="text-align: center; color: #333; margin-bottom: 20px;">Coste Computacional y Eficiencia</h3>
        <table class="styled-table">
            <thead>
                <tr>
                    <th style="width: 20%;">Modelo</th>
                    <th style="width: 20%; text-align: center;">üíæ Almacenamiento</th>
                    <th style="width: 20%; text-align: center;">‚è≥ Latencia</th>
                    <th style="width: 20%; text-align: center;">‚ö° Velocidad<br><span style="font-size: 0.75em; color: #95a5a6; font-weight: normal;">(T/S = Tokens/seg)</span></th>
                    <th style="width: 20%; text-align: center;">Veredicto final</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="font-weight: bold; color: #2c3e50;">GPT-OSS 20B</td>
                    <td style="text-align: center;"><span class="mono-data">12.10 GB</span></td>
                    <td style="text-align: center;"><span class="mono-data">0.49 s</span></td>
                    <td style="text-align: center;"><span class="mono-data">35.04 T/s</span></td>
                    <td style="text-align: center;"><span style="background-color: #f8d7da; color: #721c24; padding: 5px 10px; border-radius: 6px; font-weight: bold;">Alto Coste</span><div style="font-size: 0.75em; color: #666; margin-top: 4px;">Pesado y Lento</div></td>
                </tr>
                <tr>
                    <td style="font-weight: bold; color: #2c3e50;">Qwen 3 VL 4B</td>
                    <td style="text-align: center;"><span class="mono-data">3.11 GB</span></td>
                    <td style="text-align: center;"><span class="mono-data">0.61 s</span></td>
                    <td style="text-align: center;"><span class="mono-data">39.14 T/s</span></td>
                    <td style="text-align: center;"><span style="background-color: #fff3cd; color: #856404; padding: 5px 10px; border-radius: 6px; font-weight: bold;">Medio</span><div style="font-size: 0.75em; color: #666; margin-top: 4px;">Latencia Alta</div></td>
                </tr>
                <tr>
                    <td style="font-weight: bold; color: #2c3e50;">Granite 4.0 Tiny</td>
                    <td style="text-align: center;"><span class="mono-data">Muy Bajo</span></td>
                    <td style="text-align: center;"><span class="mono-data">0.16 s</span></td>
                    <td style="text-align: center;"><span class="mono-data">56.75 T/s</span></td>
                    <td style="text-align: center;"><span style="background-color: #d1ecf1; color: #0c5460; padding: 5px 10px; border-radius: 6px; font-weight: bold;">Muy Bajo</span><div style="font-size: 0.75em; color: #666; margin-top: 4px;">Ultraligero</div></td>
                </tr>
                <tr>
                    <td style="font-weight: bold; color: #2c3e50;">Qwen 3 Thinking</td>
                    <td style="text-align: center;"><span class="mono-data">2.28 GB</span></td>
                    <td style="text-align: center;"><span class="mono-data">0.19 s</span></td>
                    <td style="text-align: center;"><span class="mono-data">83.41 T/s</span></td>
                    <td style="text-align: center;"><span style="background-color: #d4edda; color: #155724; padding: 5px 10px; border-radius: 6px; font-weight: bold;">Eficiente</span><div style="font-size: 0.75em; color: #666; margin-top: 4px;">Rendimiento Top</div></td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2 class="section-title">Comparativa detallada de rendimiento completo: Windows vs Mac</h2>
    <p class="section-subtitle">M√©tricas extendidas: T/s, Tokens Totales, TTFT y Tiempo Total</p>

    <div class="accuracy-grid">
        <div class="chart-container">
            <div class="chart-title">Windows - Rendimiento Completo</div>
            <div class="chart-subtitle-detail">Windows: GPT OSS 36.19 t/s | Qwen3 109.11 t/s | Granite 72.71 t/s | Qwen3 Thinking 101.20 t/s</div>
            <canvas id="windowsPerf"></canvas>
        </div>

        <div class="chart-container">
            <div class="chart-title">Mac - Rendimiento Completo</div>
            <div class="chart-subtitle-detail">Mac: GPT OSS 34.15 t/s | Qwen3 34.76 t/s | Granite 39.14 t/s | Qwen3 Thinking 34.32 t/s</div>
            <canvas id="macPerf"></canvas>
        </div>
    </div>

    <script>
        // Etiquetas comunes
        const labelsPerf = ['GPT OSS', 'Qwen3', 'Granite', 'Qwen3 Thinking'];

        // Datos estimados de la imagen para WINDOWS
        const winData = {
            ts: [36.19, 109.11, 72.71, 101.20],
            tokens: [15, 9, 1, 143], // Escala x100 aprox
            ttft: [5, 2, 2, 3],      // Escala x10 aprox
            time: [42, 9, 2, 142]    // Segundos aprox
        };

        // Datos estimados de la imagen para MAC
        const macData = {
            ts: [34.15, 34.76, 39.14, 34.32],
            tokens: [6, 42, 9, 34],  // Escala x100 aprox
            ttft: [105, 8, 6, 8],    // Escala x10 (GPT OSS muy alto)
            time: [28, 125, 27, 100] // Segundos aprox
        };

        const bgColors = [
            'rgba(54, 162, 235, 0.7)',  // Azul (T/s)
            'rgba(255, 206, 86, 0.7)',  // Amarillo (Tokens)
            'rgba(75, 192, 192, 0.7)',  // Verde azulado (TTFT)
            'rgba(255, 99, 132, 0.7)'   // Rosa (Tiempo)
        ];
        
        const borderColors = [
            'rgba(54, 162, 235, 1)',
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(255, 99, 132, 1)'
        ];

        // Funci√≥n para generar datasets
        function createDatasets(dataObj) {
            return [
                { label: 'Tokens/segundo', data: dataObj.ts, backgroundColor: bgColors[0], borderColor: borderColors[0], borderWidth: 1 },
                { label: 'Tokens Totales (x100)', data: dataObj.tokens, backgroundColor: bgColors[1], borderColor: borderColors[1], borderWidth: 1 },
                { label: 'TTFT (seg x10)', data: dataObj.ttft, backgroundColor: bgColors[2], borderColor: borderColors[2], borderWidth: 1 },
                { label: 'Tiempo Total (seg)', data: dataObj.time, backgroundColor: bgColors[3], borderColor: borderColors[3], borderWidth: 1 }
            ];
        }

        const perfOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { position: 'top', labels: { boxWidth: 15, font: { size: 10 } } },
                tooltip: { mode: 'index', intersect: false }
            },
            scales: {
                y: { beginAtZero: true },
                x: { grid: { display: false } }
            }
        };

        // Renderizar Windows
        new Chart(document.getElementById('windowsPerf'), {
            type: 'bar',
            data: { labels: labelsPerf, datasets: createDatasets(winData) },
            options: perfOptions
        });

        // Renderizar Mac
        new Chart(document.getElementById('macPerf'), {
            type: 'bar',
            data: { labels: labelsPerf, datasets: createDatasets(macData) },
            options: perfOptions
        });
    </script>
    
    <h2 class="section-title">Comparativa cualitativa: Windows vs Mac</h2>
    <p class="section-subtitle">Bater√≠a de 10 Preguntas</p>

    <div class="accuracy-grid">
        <div class="chart-container">
            <div class="chart-title">Windows - Respuestas Correctas</div>
            <canvas id="windowsAccuracy"></canvas>
        </div>

        <div class="chart-container">
            <div class="chart-title">Mac - Respuestas Correctas</div>
            <canvas id="macAccuracy"></canvas>
        </div>
    </div>

    <script>
        const dataAccuracyWindows = {
            labels: ['GPT OSS', 'Qwen3', 'Granite', 'Qwen3 Thinking'],
            datasets: [{
                label: 'Respuestas Correctas (de 10)',
                data: [9, 4, 5, 4],
                backgroundColor: ['rgba(34, 197, 94, 0.8)', 'rgba(249, 115, 22, 0.8)', 'rgba(59, 130, 246, 0.8)', 'rgba(168, 85, 247, 0.8)'],
                borderColor: ['rgba(34, 197, 94, 1)', 'rgba(249, 115, 22, 1)', 'rgba(59, 130, 246, 1)', 'rgba(168, 85, 247, 1)'],
                borderWidth: 2
            }]
        };

        const dataAccuracyMac = {
            labels: ['GPT OSS', 'Qwen3', 'Granite', 'Qwen3 Thinking'],
            datasets: [{
                label: 'Respuestas Correctas (de 10)',
                data: [9, 4, 5, 0],
                backgroundColor: ['rgba(34, 197, 94, 0.8)', 'rgba(249, 115, 22, 0.8)', 'rgba(59, 130, 246, 0.8)', 'rgba(168, 85, 247, 0.8)'],
                borderColor: ['rgba(34, 197, 94, 1)', 'rgba(249, 115, 22, 1)', 'rgba(59, 130, 246, 1)', 'rgba(168, 85, 247, 1)'],
                borderWidth: 2
            }]
        };

        // Configuracion comun
        const config = {
            type: 'bar',
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'nearest', 
                    axis: 'y', 
                    intersect: false
                },
                plugins: {
                    legend: { position: 'top' }
                },
                scales: {
                    y: { beginAtZero: true, grid: { color: 'rgba(0,0,0,0.05)' } },
                    x: { grid: { display: false } }
                }
            }
        };

        // Graficos de precision
        new Chart(document.getElementById('windowsAccuracy'), {
            ...config,
            data: dataAccuracyWindows,
            options: {
                ...config.options,
                indexAxis: 'y', // ESTO HACE QUE LAS BARRAS SEAN HORIZONTALES
                plugins: {
                    ...config.options.plugins,
                    title: { display: true, text: 'Windows: 9 | 4 | 5 | 4 respuestas correctas' }
                }
            }
        });

        new Chart(document.getElementById('macAccuracy'), {
            ...config,
            data: dataAccuracyMac,
            options: {
                ...config.options,
                indexAxis: 'y', // ESTO HACE QUE LAS BARRAS SEAN HORIZONTALES
                plugins: {
                    ...config.options.plugins,
                    title: { display: true, text: 'Mac: 9 | 4 | 5 | 0 respuestas correctas' }
                }
            }
        });
    </script>
    <!-- Esta es la parte de la documentaci√≥n -->
    <div class="chart-wrapper auto-height" style="margin-top: 15px;" id="zona-documentacion">
<fieldset style="width: 100%; box-sizing: border-box; border-top: 1px solid #000000; border-bottom: none; border-left: none; border-right: none; text-align: center; margin: 20px 0;">
   <legend style="padding: 0 10px; color: #000000;">Documentaci√≥n</legend> 
   <p style="margin-top: -10px;">He realizado primero las gr√°ficas que engloban los resultados en conjunto de los entornos de Windows y Mac haciendo las medias de las medidas de ambos entornos y lueyo ya he separado las gr√°ficas para que se vean por separado los datos</p>
    <h3>1. Introducci√≥n y Objetivo</h3>
<p>En este proyecto hemos puesto a prueba la capacidad de inferencia local de varios modelos de Inteligencia Artificial (LLMs) utilizando LM Studio. El objetivo era ver no solo qui√©n responde mejor a acertijos l√≥gicos, sino c√≥mo se comportan el hardware de un PC con Windows frente a un entorno Mac (Silicon).</p>
<p>Hemos utilizado una bater√≠a de 10 acertijos cortos (como el del reloj o la toalla) y 3 problemas de l√≥gica complejos (el acertijo de las tres casas, el cruce del r√≠o con el zorro y la gallina, y la isla de los caballeros y embusteros).</p>

<h3>2. Comparativa de entornos: Windows vs Mac</h3>
<p>Lo primero que salta a la vista en nuestras gr√°ficas es la diferencia de rendimiento bruto.</p>
<p><strong>Entorno Windows:</strong> Hemos notado que la potencia bruta (probablemente por uso de tarjeta gr√°fica dedicada) dispara la velocidad de generaci√≥n. Por ejemplo, el modelo Qwen 3 Thinking alcanz√≥ picos de 101.20 tokens/segundo y Qwen 3 VL lleg√≥ a 109.11 tokens/segundo. Es una velocidad muy alta, pero conlleva un consumo de recursos muy alto.</p>
<p><strong>Entorno Mac:</strong> El entorno Mac se mostr√≥ mucho m√°s estable pero limitado en velocidad punta, rondando casi siempre los 34 - 39 tokens/segundo en casi todos los modelos (Granite, Qwen 3 VL, etc.). Parece que la arquitectura de memoria unificada de Apple es muy consistente, pero no tiene el aceler√≥n que vimos en Windows.</p>

<h3>3. An√°lisis de los modelos: ¬øQu√© nos han parecido?</h3>
<p>Tras pelear con las configuraciones y los presets, estas son nuestras conclusiones:</p>
<p><strong>Qwen 3 Thinking:</strong><br>
Impresi√≥n: En Windows, para responder a la bater√≠a de preguntas, gener√≥ 14.400 tokens. Entra en bucles de "pensamiento" (Thinking Process) largu√≠simos antes de dar una respuesta sencilla.<br>
Veredicto: Es impresionante ver c√≥mo "piensa", pero para producci√≥n es inusable por lo mucho que tarda en callarse y darnos la soluci√≥n.</p>
<p><strong>Granite 4.0 Tiny:</strong><br>
Impresi√≥n: Es el extremo opuesto de Qwen 3 Thinking. Es rapid√≠simo (TTFT de 0.16s en Windows), pero sus respuestas son muy cortas.<br>
Veredicto: Ideal si queremos montar algo que gaste poca memoria RAM y responda al instante, pero no le pidas que te escriba un poema o te explique la l√≥gica del cruce del r√≠o con detalle, porque va al grano excesivamente.</p>
<p><strong>GPT-OSS 20B:</strong><br>
Impresi√≥n: Ha sido el m√°s "cumplidor". En las pruebas de l√≥gica compleja (como la de las casas de colores), fue capaz de deducir correctamente que "Luis vive en la casa verde". Su velocidad es m√°s modesta (~35 t/s en ambos sistemas), pero es el que menos alucinaciones ha tenido.<br>
Veredicto: Si tuvi√©ramos que elegir uno para un trabajo de clase serio, ser√≠a este. Es el m√°s fiable aunque no sea el m√°s r√°pido.</p>
<p><strong>Qwen 3 VL 4B:</strong><br>
Impresi√≥n: Es un modelo multimodal ligero. En Mac sufri√≥ un poco m√°s para mantener la coherencia en las respuestas largas, tardando m√°s de 2 minutos en completar algunas tareas.</p>

<h3>4. Complejidades y problemas encontrados</h3>
<p>Durante el desarrollo, nos hemos topado con varios obst√°culos:</p>
<p>1. <strong>El "Overthinking":</strong> El problema con Qwen 3 Thinking fue que en una de las pruebas, se qued√≥ analizando si una toalla se moja o no, d√°ndole vueltas a conceptos f√≠sicos innecesarios en bucle y tuvimos que ajustar los par√°metros de Sampling y Temperature (los bajamos a 0.1) para que dejara de divagar.</p>
<p>2. <strong>Consumo de VRAM:</strong> Cargar el modelo GPT-OSS 20B (que pesa unos 12 GB cuantizado) en local requiere un equipo potente. En el equipo con menos recursos, la generaci√≥n se volv√≠a eterna.</p>
<p>3. <strong>Alucinaciones L√≥gicas:</strong> En el acertijo de la isla de los caballeros y embusteros, algunos modelos se liaban con la doble negaci√≥n ("Si A fuera caballero..."). Tuvimos que repetir la prueba varias veces porque a veces acertaban de casualidad y otras se inventaban la l√≥gica.</p>
<p>4. <strong>Diferencia de Hardware:</strong> Sincronizar los resultados entre Windows y Mac fue dif√≠cil porque el modelo que en Windows iba muy r√°pido, en Mac iba muy lento, lo que hac√≠a dif√≠cil comparar la eficiencia real.</p>

<h3>5. Conclusi√≥n Final</h3>
<p>Si se busca una velocidad pura y tenemos una buena tarjeta gr√°fica, Windows con modelos peque√±os (Tiny) es imbatible. Si buscamos estabilidad y trabajo en movilidad, el Mac aguanta el tipo muy bien con modelos medianos. Pero hay que tener especial cuidado con los modelos Thinking, ya que consumen demasiados recursos para responder acertijos sencillos.</p>
</fieldset>
</body>
</html>

