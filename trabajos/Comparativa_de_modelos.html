<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Benchmark IA: Cuantitativo vs Cualitativo</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            background-color: #f4f4f9;
            margin: 0;
            padding: 20px;
            /* Quitamos height: 100vh para permitir scroll si es necesario */
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: 'Segoe UI', sans-serif;
            gap: 30px; /* Espacio entre las dos gr√°ficas */
        }

        .chart-wrapper {
            position: relative;
            width: 90%;
            max-width: 1200px;
            background: white;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08); 
            border-radius: 20px;
            height: 45vh; /* Cada gr√°fica ocupa un poco menos de la mitad de la pantalla */
            min-height: 350px;
        }

        canvas {
            width: 100% !important;
            height: 100% !important;
        }
    </style>
</head>
<body>

    <div class="chart-wrapper">
        <canvas id="graficaCuant"></canvas>
    </div>

    <div class="chart-wrapper">
        <canvas id="graficaCual"></canvas>
    </div>

    <script>
        // --- DATOS GLOBALES ---
        const rawData = {
            labels: [
                'Qwen 3 VL 4B', 
                'Granite 4.0 Tiny', 
                'GPT-OSS 20B', 
                'Qwen 3 Thinking',
                'Qwen v1 4B'
            ],
            ptk: [904, 283, 557, 607, 2054],       // Tokens
            segundos: [23.1, 5.3, 15.8, 9.0, 20.7], // Tiempo
            calidad: [9, 5, 7, 6, 8]               // Calidad
        };

        // --- CONFIGURACI√ìN GR√ÅFICA 1: CUANTITATIVA (Tiempo vs Tokens) ---
        
        const MAX_TOKENS = 2200;
        const MAX_SEGUNDOS = 30;
        
        const styleTiempo = { color: 'rgba(54, 162, 235, 1)', label: 'Duraci√≥n (s)' }; // AZUL
        const styleTokens = { color: 'rgba(255, 99, 132, 1)', label: 'Tokens' };       // ROJO
        
        const estadoVisCuant = { tiempo: true, tokens: true };

        function calcularCapasCuant() {
            const layers = { back: { data: [], bg: [], border: [], meta: [] }, front: { data: [], bg: [], border: [], meta: [] } };

            for (let i = 0; i < rawData.labels.length; i++) {
                const rawTime = estadoVisCuant.tiempo ? rawData.segundos[i] : 0;
                const rawTok = estadoVisCuant.tokens ? rawData.ptk[i] : 0;

                const normTime = (rawTime / MAX_SEGUNDOS) * 100;
                const normTok = (rawTok / MAX_TOKENS) * 100;

                const items = [
                    { norm: normTime, raw: rawTime, style: styleTiempo, type: 'tiempo' },
                    { norm: normTok, raw: rawTok, style: styleTokens, type: 'tokens' }
                ];

                items.sort((a, b) => b.norm - a.norm); // Mayor al fondo

                layers.back.data.push(items[0].norm);
                layers.back.bg.push(items[0].style.color);
                layers.back.border.push(items[0].style.color);
                layers.back.meta.push(items[0]);

                layers.front.data.push(items[1].norm);
                layers.front.bg.push(items[1].style.color);
                layers.front.border.push(items[1].style.color);
                layers.front.meta.push(items[1]);
            }
            return layers;
        }

        let datosCuant = calcularCapasCuant();
        const ctxCuant = document.getElementById('graficaCuant').getContext('2d');

        const graficaCuant = new Chart(ctxCuant, {
            type: 'bar',
            data: {
                labels: rawData.labels,
                datasets: [
                    { data: datosCuant.back.data, backgroundColor: datosCuant.back.bg, borderColor: datosCuant.back.border, borderWidth: 1, borderRadius: 6, grouped: false, order: 2, barPercentage: 0.6, categoryPercentage: 0.8, yAxisID: 'y_base' },
                    { data: datosCuant.front.data, backgroundColor: datosCuant.front.bg, borderColor: datosCuant.front.border, borderWidth: 1, borderRadius: 6, grouped: false, order: 1, barPercentage: 0.6, categoryPercentage: 0.8, yAxisID: 'y_base' }
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false, animation: { duration: 1500, easing: 'easeOutQuart' },
                plugins: {
                    title: { display: true, text: 'An√°lisis Cuantitativo: Rendimiento y Consumo', font: { size: 18, weight: 'bold' }, padding: { bottom: 10 }, color: '#333' },
                    legend: {
                        position: 'bottom', labels: { padding: 20, font: { size: 14 }, usePointStyle: false, boxWidth: 40,
                            generateLabels: (chart) => [
                                { text: styleTokens.label, fillStyle: styleTokens.color, strokeStyle: styleTokens.color, hidden: !estadoVisCuant.tokens },
                                { text: styleTiempo.label, fillStyle: styleTiempo.color, strokeStyle: styleTiempo.color, hidden: !estadoVisCuant.tiempo }
                            ]
                        },
                        onClick: (e, legendItem) => {
                            if (legendItem.text === styleTokens.label) estadoVisCuant.tokens = !estadoVisCuant.tokens;
                            if (legendItem.text === styleTiempo.label) estadoVisCuant.tiempo = !estadoVisCuant.tiempo;
                            datosCuant = calcularCapasCuant();
                            graficaCuant.data.datasets[0].data = datosCuant.back.data; graficaCuant.data.datasets[0].backgroundColor = datosCuant.back.bg; graficaCuant.data.datasets[0].meta = datosCuant.back.meta;
                            graficaCuant.data.datasets[1].data = datosCuant.front.data; graficaCuant.data.datasets[1].backgroundColor = datosCuant.front.bg; graficaCuant.data.datasets[1].meta = datosCuant.front.meta;
                            graficaCuant.update();
                        }
                    },
                    tooltip: {
                        enabled: true, mode: 'index', intersect: false, backgroundColor: 'rgba(30, 30, 30, 0.9)', padding: 10,
                        callbacks: {
                            label: (context) => {
                                const layer = context.datasetIndex === 0 ? datosCuant.back : datosCuant.front;
                                const meta = layer.meta[context.dataIndex];
                                if (!meta || meta.raw === 0) return null;
                                return meta.type === 'tiempo' ? `‚è± ${meta.raw}s` : `üì¶ ${meta.raw} tokens`;
                            }
                        }
                    }
                },
                scales: {
                    x: { grid: { display: false }, stacked: true },
                    y_base: { display: false, min: 0, max: 100 },
                    y_left: { position: 'left', min: 0, max: 100, grid: { color: 'rgba(0,0,0,0.05)' }, title: { display: true, text: 'Tokens', color: styleTokens.color, font: {weight:'bold'} }, ticks: { color: styleTokens.color, callback: v => Math.round((v/100)*MAX_TOKENS) } },
                    y_right: { position: 'right', min: 0, max: 100, grid: { drawOnChartArea: false }, title: { display: true, text: 'Duraci√≥n (s)', color: styleTiempo.color, font: {weight:'bold'} }, ticks: { color: styleTiempo.color, callback: v => Math.round((v/100)*MAX_SEGUNDOS) + ' s' } }
                }
            }
        });

        // --- CONFIGURACI√ìN GR√ÅFICA 2: CUALITATIVA (Calidad) ---

        const styleCalidad = { color: 'rgba(46, 204, 113, 1)', label: 'Calidad (1-10)' }; // VERDE
        const ctxCual = document.getElementById('graficaCual').getContext('2d');

        const graficaCual = new Chart(ctxCual, {
            type: 'bar',
            data: {
                labels: rawData.labels,
                datasets: [{
                    label: styleCalidad.label,
                    data: rawData.calidad,
                    backgroundColor: styleCalidad.color,
                    borderColor: styleCalidad.color,
                    borderWidth: 1,
                    borderRadius: 6,
                    barPercentage: 0.6,
                    categoryPercentage: 0.8
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false, animation: { duration: 1500, easing: 'easeOutQuart' },
                plugins: {
                    title: { display: true, text: 'An√°lisis Cualitativo: Precisi√≥n de Respuesta', font: { size: 18, weight: 'bold' }, padding: { bottom: 10 }, color: '#333' },
                    legend: { display: false }, // Ocultamos leyenda porque es solo un dato
                    tooltip: {
                        backgroundColor: 'rgba(30, 30, 30, 0.9)', padding: 10,
                        callbacks: { label: (context) => `‚òÖ Calidad: ${context.raw} / 10` }
                    }
                },
                scales: {
                    x: { grid: { display: false } },
                    y: {
                        beginAtZero: true, max: 10,
                        title: { display: true, text: 'Puntuaci√≥n (1-10)', color: styleCalidad.color, font: {weight:'bold'} },
                        ticks: { stepSize: 1, color: styleCalidad.color }
                    }
                }
            }
        });
    </script>
    <div class="chart-wrapper" style="height: auto; min-height: auto; margin-top: 30px;">
    <h3 style="text-align: center; color: #333; margin-bottom: 20px;">An√°lisis Detallado de Comportamiento</h3>
    <table style="width: 100%; border-collapse: collapse; font-family: 'Segoe UI', sans-serif;">
        <thead>
            <tr style="background-color: #f8f9fa; border-bottom: 2px solid #e9ecef;">
                <th style="padding: 15px; text-align: left; color: #495057; width: 20%;">Modelo</th>
                <th style="padding: 15px; text-align: center; color: #495057; width: 15%;">Puntuaci√≥n</th>
                <th style="padding: 15px; text-align: left; color: #495057; width: 65%;">Virtudes y Fallos Detectados</th>
            </tr>
        </thead>
        <tbody>
            <tr style="border-bottom: 1px solid #e9ecef;">
                <td style="padding: 15px; font-weight: bold; color: #2c3e50;">Qwen 3 VL 4B</td>
                <td style="padding: 15px; text-align: center;">
                    <span style="background-color: #d4edda; color: #155724; padding: 5px 10px; border-radius: 6px; font-weight: bold;">9/10</span>
                </td>
                <td style="padding: 15px; line-height: 1.5;">
                    <strong style="color: #27ae60;">‚úì Virtudes:</strong> Es el modelo m√°s completo. No solo acierta, sino que justifica sus respuestas con matices, explicando el contexto (ej: entiende el doble sentido en acertijos de lenguaje).<br>
                    <strong style="color: #c0392b;">‚úó Fallos:</strong> No present√≥ errores graves en la bater√≠a de pruebas; su √∫nico "defecto" es que puede ser algo extenso si se busca una respuesta de una sola palabra.
                </td>
            </tr>
            
            <tr style="border-bottom: 1px solid #e9ecef;">
                <td style="padding: 15px; font-weight: bold; color: #2c3e50;">Qwen v1 4B</td>
                <td style="padding: 15px; text-align: center;">
                    <span style="background-color: #d4edda; color: #155724; padding: 5px 10px; border-radius: 6px; font-weight: bold;">8/10</span>
                </td>
                <td style="padding: 15px; line-height: 1.5;">
                    <strong style="color: #27ae60;">‚úì Virtudes:</strong> Muy robusto en l√≥gica pura. Fue capaz de resolver problemas de deducci√≥n compleja (tipo "caballeros y embusteros") sin perderse en el razonamiento.<br>
                    <strong style="color: #c0392b;">‚úó Fallos:</strong> Su estilo es m√°s "rob√≥tico" y directo que la versi√≥n VL. Acierta, pero no educa ni elabora tanto la respuesta.
                </td>
            </tr>

            <tr style="border-bottom: 1px solid #e9ecef;">
                <td style="padding: 15px; font-weight: bold; color: #2c3e50;">GPT-OSS 20B</td>
                <td style="padding: 15px; text-align: center;">
                    <span style="background-color: #fff3cd; color: #856404; padding: 5px 10px; border-radius: 6px; font-weight: bold;">7/10</span>
                </td>
                <td style="padding: 15px; line-height: 1.5;">
                    <strong style="color: #27ae60;">‚úì Virtudes:</strong> Cumplidor. Resuelve correctamente problemas de l√≥gica secuencial (qui√©n vive en qu√© casa) y mantiene la coherencia.<br>
                    <strong style="color: #c0392b;">‚úó Fallos:</strong> Le falta "chispa". Sus respuestas son extremadamente est√°ndar y mec√°nicas. Es fiable pero no destaca en creatividad ni en matices ling√º√≠sticos.
                </td>
            </tr>

            <tr style="border-bottom: 1px solid #e9ecef;">
                <td style="padding: 15px; font-weight: bold; color: #2c3e50;">Qwen 3 Thinking</td>
                <td style="padding: 15px; text-align: center;">
                    <span style="background-color: #fff3cd; color: #856404; padding: 5px 10px; border-radius: 6px; font-weight: bold;">6/10</span>
                </td>
                <td style="padding: 15px; line-height: 1.5;">
                    <strong style="color: #27ae60;">‚úì Virtudes:</strong> Muestra su cadena de pensamiento ("Thinking Process"), lo cual es √∫til para ver c√≥mo intenta deducir.<br>
                    <strong style="color: #c0392b;">‚úó Fallos:</strong> Sufre de "sobre-an√°lisis". Al intentar pensar demasiado respuestas sencillas, acaba alucinando (inventando) respuestas incorrectas y absurdas en acertijos b√°sicos de ni√±os.
                </td>
            </tr>

            <tr style="border-bottom: 1px solid #e9ecef;">
                <td style="padding: 15px; font-weight: bold; color: #2c3e50;">Granite 4.0 Tiny</td>
                <td style="padding: 15px; text-align: center;">
                    <span style="background-color: #f8d7da; color: #721c24; padding: 5px 10px; border-radius: 6px; font-weight: bold;">5/10</span>
                </td>
                <td style="padding: 15px; line-height: 1.5;">
                    <strong style="color: #27ae60;">‚úì Virtudes:</strong> Concisi√≥n extrema. Si solo buscas un dato puntual sin texto alrededor, es r√°pido.<br>
                    <strong style="color: #c0392b;">‚úó Fallos:</strong> Carece de capacidad conversacional. Sus respuestas son listas de palabras o monos√≠labos ("Reloj", "Viento") sin conectar frases, lo que lo hace sentir muy limitado para un chat.
                </td>
            </tr>
        </tbody>
    </table>
</div>
</body>
</html>
